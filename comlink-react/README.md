origin commit: a23b31fbc86c6790648a4b0d28e2e98d2f715391 (running long time function on main thread)